<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>工地桩机数据展示平台</title>
		<link rel="stylesheet" href="css/base.css" />
		<link rel="stylesheet" href="css/GeneralUser.css" />
		<link rel="shortcut icon" href="favicon.ico" />
		<script src="js/echarts.js"></script>
		<script src="js/jquery-3.1.0.min.js"></script>
		<script type="text/javascript" src="js/config.js"></script>
		<script type="text/javascript" src="js/index.js"></script>	
		<script type="text/javascript" src="js/vue.min.js"></script>
		<script type="text/javascript" src="js/times.js"></script>
		<script type="text/javascript" src="js/online.js"></script>
		<script type="text/javascript" src="js/data.js"></script>
		<script type="text/javascript" src="js/index.js"></script>
		<script type="text/javascript" src="js/base.js"></script>
		<script type="text/javascript" src="js/GeneralUser.js"></script>
		
	</head>
	<body>
		<!--顶部 start-->
		<header>
			<!--logo部分 start-->
			<div class="logo">
				<h1>
					<a href="#" title="学成在线教育平台">学成在线</a>
				</h1>
			</div>
			<!--logo 部分 end-->
			<!--nav 部分 start-->
			<nav>
				<ul>
					<li><a href="#">数据展示</a></li>
					<li><a href="#">电子地图</a></li>
					<li><a href="#">视频监控</a></li>
					<li><a href="#">联系我们</a></li>
				</ul>
			</nav>
			<!--nav 部分 end-->
			<!--search 部分 start-->
			<div class="search">
				<input type="search" name="" id="" placeholder="请输入关键字"/><button></button>
			</div>
			<!--search 部分 end-->
			<!--个人中心部分 start-->
			<div class="personal">
				<dl>
					<dt>个人中心
						<dd>
							<span>
								<img src="img/people.png" alt="" />刘德华
							</span>
						</dd>
					</dt>
				</dl>
			</div>
			<!--个人中心部分 end-->
		</header>
		<!--顶部 end-->
		<!--内容 start-->
		<div class="banner">
			<div class="form-data">
				<div class="form-data-left">
					<div class="top">
						<form>
							<label for="pileNo">桩机流水号:</label>
							<input type="text" id="pileNo"/>
						</form>
						<form>
							<label for="machineNo">机台编号:</label>
							<input type="text" id="machineNo"/>
						</form>
						<form>
							<label for="beginTime">开始时间:</label>
							<input type="date" id="beginTime"/>
						</form>
						<form>
							<label for="endTime">结束时间:</label>
							<input type="date" id="endTime"/>
						</form>
						<form>
							<label for="team">部门队伍:</label>
							<input type="text" id="team"/>
						</form>
						<button style="background: #ff0000;" class="button-one" onclick="showRecord(1)">查询</button>
						<button style="background: #36791A;" class="button-two"  onclick="exportThisPage()">导出本页数据</button>
						<button style="background: #36791A;" class="button-three" onclick="exportAll()">导出所有数据</button>
						<form id="form1" style="display: none;" >
							<input hidden="" value="" id = "dataJsonInput" name="dataJson" />
						</form>
						<img src="img/bj-1.png" alt="" class="bj-1">
	                    <img src="img/bj-2.png" alt="" class="bj-2">
	                    <img src="img/bj-3.png" alt="" class="bj-3">
	                    <img src="img/bj-4.png" alt="" class="bj-4">
					</div>
					<div class="middle">
						
						<script type="text/javascript">
							//单击某一行时改变其背景，选取另一行时之前那行恢复，后来点击的那一行背景改变
							var temptr = $();
							$(function(){
								$("#tbody1").on("click","tr",function(event){
									temptr.removeClass("tr_active");
									temptr = $(this);
									temptr.addClass("tr_active")
								});
							});
							
							//鼠标在表单上滑动时选中当前行改变背景
							var rows = document.getElementsByTagName('tr');//取得行
					        for(var i=0 ;i<rows.length; i++)
					        {
					            rows[i].onmouseover = function(){//鼠标移上去,添加一个类'hilite'
					                this.className += 'hilite';
					            }
					            rows[i].onmouseout = function(){//鼠标移开,改变该类的名称
					                this.className = this.className.replace('hilite','');
					            }
					        }
						</script>
						        
				        <style type="text/css">
				            .tr_active {
								background: rgba(0,139,139,0.5);
								}
							.tbody1 tr:hover,.tbody1 tr.hilite{
					            background: rgba(0,139,139,0.5);
					            color:#0000CC;
				            }
					    </style>
						
						<table cellpadding="0" cellspacing="0" id="recordTalbe">
							<thead>
							<tr class="tr">
								<th>机台编号</th>
								<th>桩机流水号</th>
								<th>第一次下料重量</th>
								<th>第二次下料重量</th>
								<th>第一次下料深度</th>
								<th>第二次下料深度</th>
								<th>总深度</th>
								<th>开始时间</th>
								<th>结束时间</th>
							</tr>
							</thead>
							<tbody id="tbody1" class="tbody1">
							
							</tbody>
						</table>
					</div>
					<div class="bottom" id="pageInfoDiv">
						<!-- <p>共<i id = "bian">1616</i>页记录，已加载<i>10</i>条</p>
						<button class="bt1">首页</button>
						<button class="bt2">上一页</button>
						<input class="page-in" type="text" placeholder="页码">
						<button class="bt3">跳转</button>
						<button class="bt4">下一页</button>
						<button class="bt5">尾页</button>
						<span id="localtime"></span> -->
						<p>查询到<i id = "record">XXXXX</i>条记录，共<i id = "sum-page">XXX</i>页，当前为第<i id = "current-page">X</i>页</p>
						<button class="bt1">首页</button>
						<button class="bt2">上一页</button>
						<input class="page-in" type="text" placeholder="页码">
						<button class="bt3">跳转</button>
						<button class="bt4">下一页</button>
						<button class="bt5">尾页</button>
						<span id="localtime"></span>
					</div>
				</div>
				
				<div class="form-data-right">
					<div class="tick-top">
						<img src="img/bj-1.png" alt="" class="bj-1">
	                    <img src="img/bj-2.png" alt="" class="bj-2">
	                    <img src="img/bj-3.png" alt="" class="bj-3">
	                    <img src="img/bj-4.png" alt="" class="bj-4">
						<p>双向喷粉搅拌桩</p>
						<p>BH:<span id="BH"></span> Z:<span id="Z"></span></p>
						<p><span id="beginTimeRright"></span></p>
						<p><span id="endTimeRright"></span></p>
						<p>NO:<span id="NO_up"></span>#</p>
						<p>TL:<span id="TL"></span>Kg</p>
						<p>TH:<span id="TH"></span>M</p>
						<p>S1:<span >00.0</span>M-><span id="S1"></span>M</p>
						<p>&nbsp;&nbsp;&nbsp;<span  id="W1"></span>Kg</p>
						<p>S2:<span>00.0</span>M-><span id="S2"></span>M</p>
						<p>&nbsp;&nbsp;&nbsp;<span  id="W2"></span>Kg</p>
					</div>
					<div class="tick-bottom">
						<table cellpadding="0" cellspacing="0">
							<thead>
								<tr>
									<th>NO:</th>
									<th>m</th>
									<th>Kg/m</th>
								</tr>
							</thead>
							
							<tbody id="weight_record" >

							</tbody>


							
						</table>
				</div>
				</div>
			</div>
			<div class="chart">
				<div class="left">
					<img src="img/bj-1.png" alt="" class="bj-1">
                    <img src="img/bj-2.png" alt="" class="bj-2">
                    <img src="img/bj-3.png" alt="" class="bj-3">
                    <img src="img/bj-4.png" alt="" class="bj-4">
					<div class="left-chart" id="main"></div>
				</div>
				<div class="mid">
					<img src="img/bj-1.png" alt="" class="bj-1">
                    <img src="img/bj-2.png" alt="" class="bj-2">
                    <img src="img/bj-3.png" alt="" class="bj-3">
                    <img src="img/bj-4.png" alt="" class="bj-4">
					<div class="img" id="img-chart"></div>
					<div class="team-data">
						<p><span>机台编号:</span><input type="text" /><span>部门队伍:</span><input type="text" /></p>
						<p><span>设计桩长:</span><input type="text" /><span>实际桩长:</span><input type="text" /></p>
					</div>
				</div>
				<div class="right">
					<img src="img/bj-1.png" alt="" class="bj-1">
                    <img src="img/bj-2.png" alt="" class="bj-2">
                    <img src="img/bj-3.png" alt="" class="bj-3">
                    <img src="img/bj-4.png" alt="" class="bj-4">
					<div class="right-chart" id="main-two"></div>
				</div>
			</div>
		</div>
		<!--内容 end-->
	<script type="text/javascript">
	    var myChart = echarts.init(document.getElementById('img-chart'));
	    option = {
	        legend: {
	            x : 'center',
	            y : 'bottom',
	            itemWidth: 8,
	            itemHeight: 8,
	            textStyle:{//图例文字的样式
	                color:'#fff',
	                fontSize:12
	            },
	            data:['下限','下下限','正跳变','负跳变']
	        },
	        calculable : true,
	        series : [
	            {
	                name:'面积模式',
	                type:'pie',
	                radius : [30, 80],
	                center : ['50%', '50%'],
	                roseType : 'area',
	                data:[
	                    {value:vm.online.v3, name:'下限',itemStyle:{normal:{color:'#7627cb'}}},
	                    {value:vm.online.v4, name:'下下限',itemStyle:{normal:{color:'#fffc00'}}},
	                    {value:vm.online.v5, name:'正跳变',itemStyle:{normal:{color:'#46afdb'}}},
	                    {value:vm.online.v6, name:'负跳变',itemStyle:{normal:{color:'#ff0000'}}}
	                ]
	            }
	        ]
	    };
	        myChart.setOption(option);
	       var worldMapContainer = document.getElementById('img-chart');
		//用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
	     var resizeWorldMapContainer = function () {
	          var owidth=window.innerWidth*0.7;
	         worldMapContainer.style.width = window.innerWidth-owidth+'px';
	     };
	     //设置容器高宽
	    resizeWorldMapContainer();
		pieMyChart.setOption(pieOption);
		//浏览器大小改变时重置大小
	    window.addEventListener("resize",function(){
	        //重置容器高宽
	        resizeWorldMapContainer();
	        pieMyChart.resize();
	    });
	</script>
	
	<script type="text/javascript">
        
	</script>
	
	
	<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main-two'));
		
        // 指定图表的配置项和数据
		option = {
			title: {
	        	//主标题文本，'\n'指定换行
	            text: '每0.1米下料详情',
	            textStyle:{
	            	color: '#fff'
	            },
	            //水平安放位置，默认为左侧，可选为：'center' | 'left' | 'right' | {number}（x坐标，单位px）
				x: 'center',
				//垂直安放位置，默认为全图顶端，可选为：'top' | 'bottom' | 'center' | {number}（y坐标，单位px）
				y: 'top'
			},
			backgroundColor:'transparent',
			tooltip: {
				trigger: 'item',
				axisPointer: { // 坐标轴指示器，坐标轴触发有效
					type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
				},
				padding: 10,
				formatter: function(params) {
					return params.name + '</br>' + '水泥用量：' + params.value + '千克' + '</br>'
				}
			},
//				    legend: {
//						    //显示策略，可选为：true（显示） | false（隐藏），默认值为true
//						    show: true,
//						    //水平安放位置，默认为全图居中，可选为：'center' | 'left' | 'right' | {number}（x坐标，单位px）
//						    x: 'center',
//						    //垂直安放位置，默认为全图顶端，可选为：'top' | 'bottom' | 'center' | {number}（y坐标，单位px）
//						    y: 'top',
//						},
						//工具箱，每个图表最多仅有一个工具箱
			toolbox: {
				right: 5,
				top: 5,
				//显示策略，可选为：true（显示） | false（隐藏），默认值为false
				show: true,
				//启用功能，目前支持feature，工具箱自定义功能回调处理
				feature: {
					//辅助线标志
					mark: {show: true},
					//dataZoom，框选区域缩放，自动与存在的dataZoom控件同步，分别是启用，缩放后退
					dataZoom: {
						show: true,
					//		        iconStyle: {
					//		            		borderColor: 'green'
					//		            },
						title: {
							dataZoom: '区域缩放',
							dataZoomReset: '区域缩放后退'
						}
					},
					//数据视图，打开数据视图，可设置更多属性,readOnly 默认数据视图为只读(即值为true)，可指定readOnly为false打开编辑功能
					dataView: {show: true, readOnly: true},
					//magicType，动态类型切换，支持直角系下的折线图、柱状图、堆积、平铺转换
					magicType: {show: true, type: ['line', 'bar']},
					//restore，还原，复位原始图表
					restore: {show: true},
					//saveAsImage，保存图片（IE8-不支持）,图片类型默认为'png'
					saveAsImage: {show: true}
				}
			},
			calculable : true,
			xAxis : [
				{
					type : 'category',
					axisLine:{
						show:true,
						lineStyle:{
							color:'#DDDDDD',
							width:0
						}
					},
					splitLine:{
						show:false
					},
					axisTick:{
						show:true
					},
					axisLabel:{
						show:true,
						textStyle:{
							color:'#999'
							}
					},
				  data: function (){
							var list = [];
							for(var i = 0;i<10;i++){
								list.push('0' +  '.' + i + '米');
								//list.push(i +  '-' + (i+1) + 'dm');
							}
							return list;
						}()
				}
			],
			yAxis : [
				{
					type : 'value',
					name : '下料重量（kg/0.1m）',
					nameTextStyle: {
						color: 'rgb(0, 252, 255)'
					},
					axisLabel : {
						formatter: '{value} kg',
						textStyle: {
							color: 'orange'
						}
					},
					axisLine:{
						show:true,
						lineStyle:{
							color:'#DDDDDD',
							width:1
						}
					},
					splitLine:{
						show:false
					}
				}
			],
//				    grid: {
//				        x: 45,
//				        x2: 15,
//				        y: 25,
//				        y2: 15,
//				        backgroundColor:'#fff',
//				        borderWidth: 0
//				    },
			grid: {
			  left: '4%',
			  right: '5%',
			  top:'20%',
			  bottom: '1%',
			  containLabel: true
			},
			series: [{
				name: '指标',
				type: 'bar',
				// barWidth: 20,
				itemStyle:{
					normal:{
						barBorderRadius: 5,
						color: function(params) {
							var colorList = [     //柱子颜色
								'#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
								'#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
								'#D7504B','#C6E579','#F4E001'
							];
							return colorList[params.dataIndex]
						}
					},
					emphasis:{
						barBorderRadius: 5
					}
				},
				//系列中的数据标注内容
				markPoint: {
					data: [
						{type: 'max', name: '最大值'},
						{type: 'min', name: '最小值'}
					]
				},
				//系列中的数据标线内容
				markLine: {
					data: [
						{type: 'average', name: '平均值'}
					]
				},
				//初始数据
				data:[
					{value: 0},
					{value: 0},
					{value: 0},
					{value: 0},
					{value: 0},
					{value: 0},
					{value: 0},
					{value: 0},
					{value: 0},
					{value: 0},
					{value: 0}
				]
			}]
		};
		
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
		
		
		/*
		//获取Echart
		var myChart = echarts.init(document.getElementById('main-two'));
		//打开加载特效
		myChart.showLoading();
		// 异步加载数据
		$.get('data.json').done(function (data) {
			//关闭加载特效
			myChart.hideLoading();
			// 填入数据
			myChart.setOption({
				xAxis: {
					data: data.categories
				},
				series: [{
					// 根据名字对应到相应的系列
					name: '销量',
					data: data.data
				}]
			});
		});
		
		data.json
		{
			"categories": [
				"0.0米",
				"0.1米",
				"0.2米",
				"0.3米",
				"0.4米",
				"0.5米",
				"0.6米",
				"0.7米",
				"0.8米",
				"0.9米"
			],
			"data": [
				0,
				0,
				0,
				0,
				0,
				0,
				0,
				0,
				0,
				0
			]
		}
		
		*/	
		
		
        //echart自适应
        var worldMapContainer = document.getElementById('main-two');
		//用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
		var resizeWorldMapContainer = function () {
			var owidth=window.innerWidth*0.8;
			worldMapContainer.style.width = window.innerWidth-owidth+'px';
		};
		//设置容器高宽
		resizeWorldMapContainer();
		dayGaugeMyChart.setOption(dayGaugeOption, true);
		//浏览器大小改变时重置大小
		window.addEventListener("resize",function(){
			//重置容器高宽
			resizeWorldMapContainer();
			dayGaugeMyChart.resize();
		});
	</script>

	<script>
		function showLocale(objD){
			var str,colorhead,colorfoot;
			var yy = objD.getYear();
			if(yy<1900) yy = yy+1900;
			var MM = objD.getMonth()+1;
			if(MM<10) MM = '0' + MM;
			var dd = objD.getDate();
			if(dd<10) dd = '0' + dd;
			var hh = objD.getHours();
			if(hh<10) hh = '0' + hh;
			var mm = objD.getMinutes();
			if(mm<10) mm = '0' + mm;
			var ss = objD.getSeconds();
			if(ss<10) ss = '0' + ss;
			var ww = objD.getDay();
			if  ( ww==0 )  colorhead="<font color=\"#08FCF3\">";
			if  ( ww > 0 && ww < 6 )  colorhead="<font color=\"#08FCF3\">";
			if  ( ww==6 )  colorhead="<font color=\"#08FCF3\">";
			if  (ww==0)  ww="星期日";
			if  (ww==1)  ww="星期一";
			if  (ww==2)  ww="星期二";
			if  (ww==3)  ww="星期三";
			if  (ww==4)  ww="星期四";
			if  (ww==5)  ww="星期五";
			if  (ww==6)  ww="星期六";
			colorfoot="</font>"
			str = colorhead + yy + "-" + MM + "-" + dd + " " + hh + ":" + mm + ":" + ss + "  " + ww + colorfoot;
			return(str);
		}

		function tick(){
			var today;
			today = new Date();
			document.getElementById("localtime").innerHTML = showLocale(today);
//			document.getElementById('bian').innerText = "150";
			window.setTimeout("tick()", 1000);
		}
		tick();
	</script>
	</body>
</html>
